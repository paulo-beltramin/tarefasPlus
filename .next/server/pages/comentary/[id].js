(()=>{var e={};e.id=778,e.ids=[220,636,778],e.modules={361:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},979:()=>{},1779:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var s=a(8732),r=a(2341);function i(){return(0,s.jsxs)(r.Html,{lang:"pt-br",children:[(0,s.jsx)(r.Head,{}),(0,s.jsxs)("body",{children:[(0,s.jsx)(r.Main,{}),(0,s.jsx)(r.NextScript,{})]})]})}},2015:e=>{"use strict";e.exports=require("react")},2420:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var s=a(8732),r=a(4722),i=a(9918),n=a.n(i),c=a(8880),o=a.n(c);let l=()=>{let{data:e,status:t}=(0,r.useSession)();return(0,s.jsx)("div",{children:(0,s.jsxs)("header",{className:o().container,children:[(0,s.jsx)("div",{className:o().container__logo,children:(0,s.jsxs)("div",{className:o().container__logo__items,children:[(0,s.jsxs)("p",{children:[(0,s.jsx)(n(),{href:"/",children:"Tarefas"}),(0,s.jsx)("span",{children:"+"})]}),e?.user?.email&&(0,s.jsx)(n(),{href:"/admin",children:(0,s.jsx)("button",{children:"Meu painel"})})]})}),"loading"===t?(0,s.jsx)("div",{}):e?(0,s.jsx)("div",{className:o().container__saudation,onClick:()=>(0,r.signOut)(),children:(0,s.jsxs)("p",{title:"Deslogar",children:["Ol\xe1 ",e.user?.name]})}):(0,s.jsx)("div",{className:o().container__saudation,onClick:()=>(0,r.signIn)("google"),children:(0,s.jsx)("p",{title:"Logar",children:"Login"})})]})})};function d({Component:e,pageProps:t}){return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(r.SessionProvider,{session:t.session,children:[(0,s.jsx)(l,{}),(0,s.jsx)(e,{...t})]})})}a(979)},3873:e=>{"use strict";e.exports=require("path")},4337:e=>{"use strict";e.exports=import("firebase/firestore")},4722:e=>{"use strict";e.exports=require("next-auth/react")},6551:e=>{"use strict";e.exports=import("firebase/app")},7227:e=>{e.exports={container:"styles_container__RgAgL",container__coment:"styles_container__coment__Xyt3u",container__coment__text:"styles_container__coment__text__uimt4",container__list:"styles_container__list__yB_Uk",container__list__li:"styles_container__list__li__F7Ta0"}},7387:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{config:()=>x,default:()=>u,getServerSideProps:()=>p,getStaticPaths:()=>m,getStaticProps:()=>_,reportWebVitals:()=>h,routeModule:()=>v,unstable_getServerProps:()=>f,unstable_getServerSideProps:()=>S,unstable_getStaticParams:()=>b,unstable_getStaticPaths:()=>j,unstable_getStaticProps:()=>g});var r=a(3885),i=a(237),n=a(1413),c=a(1779),o=a(2420),l=a(9615),d=e([l]);l=(d.then?(await d)():d)[0];let u=(0,n.M)(l,"default"),_=(0,n.M)(l,"getStaticProps"),m=(0,n.M)(l,"getStaticPaths"),p=(0,n.M)(l,"getServerSideProps"),x=(0,n.M)(l,"config"),h=(0,n.M)(l,"reportWebVitals"),g=(0,n.M)(l,"unstable_getStaticProps"),j=(0,n.M)(l,"unstable_getStaticPaths"),b=(0,n.M)(l,"unstable_getStaticParams"),f=(0,n.M)(l,"unstable_getServerProps"),S=(0,n.M)(l,"unstable_getServerSideProps"),v=new r.PagesRouteModule({definition:{kind:i.A.PAGES,page:"/comentary/[id]",pathname:"/comentary/[id]",bundlePath:"",filename:""},components:{App:o.default,Document:c.default},userland:l});s()}catch(e){s(e)}})},7564:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.d(t,{db:()=>o});var r=a(6551),i=a(4337),n=e([r,i]);[r,i]=n.then?(await n)():n;let c=(0,r.initializeApp)({apiKey:"AIzaSyCW-LW9Kq3KXfDoaIWFxXeybbGainXy2jg",authDomain:"tarefasplus-c67b9.firebaseapp.com",projectId:"tarefasplus-c67b9",storageBucket:"tarefasplus-c67b9.firebasestorage.app",messagingSenderId:"976386826928",appId:"1:976386826928:web:7c580b7ba02f34c5255175"}),o=(0,i.getFirestore)(c);s()}catch(e){s(e)}})},8732:e=>{"use strict";e.exports=require("react/jsx-runtime")},8880:e=>{e.exports={container:"style_container__ISs1u",container__logo__items:"style_container__logo__items__H_aoY",container__saudation:"style_container__saudation__3NcdS"}},9615:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{default:()=>m,getServerSideProps:()=>p});var r=a(8732),i=a(4722),n=a(4337),c=a(2015),o=a(5472),l=a(7227),d=a.n(l),u=a(7564),_=e([n,u]);[n,u]=_.then?(await _)():_;let m=({item:e,list:t})=>{let{data:a}=(0,i.useSession)(),[s,l]=(0,c.useState)(""),[_,m]=(0,c.useState)(t),p=async t=>{if((t.preventDefault(),""!==s)&&a?.user?.email&&a?.user?.name)try{await (0,n.addDoc)((0,n.collection)(u.db,"comments"),{comment:s,created:new Date().toLocaleDateString(),user:a?.user?.email,name:a?.user?.name,id:e.id});let t={comment:s,created:new Date().toLocaleDateString(),user:a?.user?.email,name:a?.user?.name,id:e.id};m(e=>[...e,t]),l("")}catch(e){console.log(e)}},x=async e=>{try{let t=(0,n.doc)(u.db,"comments",e);await (0,n.deleteDoc)(t);let a=_.filter(t=>t.id!==e);m(a)}catch(e){console.log(e)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("head",{children:(0,r.jsx)("title",{children:"Detalhes da tarefa"})}),(0,r.jsxs)("main",{className:d().container,children:[(0,r.jsxs)("form",{className:d().container__coment,onSubmit:p,children:[(0,r.jsx)("textarea",{children:e?.tarefas}),(0,r.jsx)("h2",{children:"Deixar um comentario"}),(0,r.jsx)("div",{className:d().container__coment__text,children:(0,r.jsx)("textarea",{placeholder:"Digite seu comentario",value:s,onChange:e=>l(e.target.value)})}),(0,r.jsx)("button",{disabled:!a?.user,children:"Enviar comentario"})]}),(0,r.jsxs)("section",{className:d().container__list,children:[(0,r.jsx)("h2",{children:"Todos os comentarios"}),(0,r.jsx)("ul",{children:_.map(e=>(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("li",{children:[(0,r.jsx)("p",{children:e.name}),(0,r.jsxs)("div",{className:d().container__list__li,children:[(0,r.jsx)("span",{children:e.comment}),e.user===a?.user?.email&&(0,r.jsx)("p",{children:(0,r.jsx)(o.b6i,{size:28,onClick:()=>x(e.id)})})]})]},e.id)}))})]})]})]})},p=async({params:e})=>{let t=e?.id,a=(0,n.doc)(u.db,"tarefas",t),s=await (0,n.getDoc)(a);if(void 0===s.data()||!s.data()?.public)return{redirect:{destination:"/",permanent:!1}};let r=s.data()?.created?.seconds*1e3,i={tarefas:s.data()?.tarefas,public:s.data()?.public,user:s.data()?.user,created:new Date(r).toLocaleDateString(),id:s.id},c=(0,n.query)((0,n.collection)(u.db,"comments"),(0,n.where)("id","==",t)),o=await (0,n.getDocs)(c),l=[];return o.forEach(e=>{l.push({comment:e.data().comment,name:e.data().name,user:e.data().user,id:e.id,created:e.data().created})}),{props:{item:i,list:l}}};s()}catch(e){s(e)}})}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[820,341,918,240],()=>a(7387));module.exports=s})();